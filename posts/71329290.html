<!doctype html>
<html>

<head>
  <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="keywords" content="acyort, nodejs, blog" />
<meta name="description" content="A Node.js blog tool powered by GitHub." />
<link rel="icon" href="/icon.png" />
<link rel="stylesheet" href="/css/style.css" />

  <title>
创建类似 http://ithinkimight.com/ 随机大小排布界面 | AcyOrt
</title>
</head>

<body>

<div class="header">
    <div class="center">
        <h1><a href="/">AcyOrt</a></h1>
        <p>A Node.js blog tool powered by GitHub.</p>
    </div>
    <div class="menu">
    
    <a href="/">首页</a>
    
    <a href="/archives/">归档</a>
    
    <a href="/tag/">所有标签</a>
    
    </div>
</div>



<div id="post" class="center">
    <h1>创建类似 http://ithinkimight.com/ 随机大小排布界面</h1>
    <p><a href="https://github.com/LoeiFy">LoeiFy</a> 发表于 2015-04-28 . - <a href="/category/0/">blog</a>
    </p>

    <div class="content">
        
        <div class="toc">
            <h3>文章目录</h3>
            <ul>
<li><a href="#例子以及实际运用效果">例子以及实际运用效果</a></li><li><a href="#实现思路">实现思路</a></li><li><a href="#实现代码">实现代码</a></li><li><a href="#其他问题">其他问题</a></li></ul>

        </div>
        
        <p><a href="http://ithinkimight.com">http://ithinkimight.com</a> 这个网站图片来自 Instagram，图片随机大小，位置也是随机，图片可以重叠，但是并没有 <strong>过分</strong> 重叠。这种随机大小，位置排版页面元素跟平常的整齐 <code>grid</code> 或者 <code>瀑布流</code> 风格很不一样，下面我们尝试一下实现类似效果</p>
<p>从网站源文件上看并不能看出网站是如何随机排布这些图片，因为是后端直接输出图片的位置参数，并不是前端实现的位置计算。不过这里有一种简单方法，可以实现类似效果。先看一下具体效果</p>
<h3 id="例子以及实际运用效果">例子以及实际运用效果</h3><p><a href="http://jsfiddle.net/am0200/1mn5xbf8/">http://jsfiddle.net/am0200/1mn5xbf8/</a></p>
<p><a href="http://stone.am0200.com/">http://stone.am0200.com/</a></p>
<h3 id="实现思路">实现思路</h3><p>首先把 container 划分为 4 个块，然后需要随机定位的 4 个块分别放到这 4 个区域，最后定义这 4 个块距离左边跟上边的最远，最近距离即可</p>
<h3 id="实现代码">实现代码</h3><p>html 部分，我们只是生成 4 个容器，每个容器都可以放置一张图片</p>
<div class="hljs html">
      <span class="mark">html</span>
      <table><tbody><tr>
      <td class="line"><pre><code><span>1</span><br /><span>2</span><br /><span>3</span><br /><span>4</span><br /><span>5</span><br /><span>6</span><br /></code></pre></td>
      <td class="code"><pre><code>&lt;section&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">"d0"</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">"d1"</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">"d2"</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">"d3"</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/section&gt;</code></pre></td>
      </tr></tbody></table>
      </div><p>css 部分，我们使用绝对定位来设置每个容器的主要位置</p>
<div class="hljs css">
      <span class="mark">css</span>
      <table><tbody><tr>
      <td class="line"><pre><code><span>1</span><br /><span>2</span><br /><span>3</span><br /><span>4</span><br /><span>5</span><br /><span>6</span><br /><span>7</span><br /><span>8</span><br /><span>9</span><br /><span>10</span><br /><span>11</span><br /><span>12</span><br /><span>13</span><br /><span>14</span><br /><span>15</span><br /><span>16</span><br /><span>17</span><br /><span>18</span><br /><span>19</span><br /><span>20</span><br /><span>21</span><br /><span>22</span><br /><span>23</span><br /><span>24</span><br /></code></pre></td>
      <td class="code"><pre><code><span class="hljs-selector-tag">section</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">position</span>: relative;
}
<span class="hljs-selector-tag">section</span> <span class="hljs-selector-tag">div</span> {
    <span class="hljs-attribute">position</span>: absolute;
}
<span class="hljs-selector-id">#d0</span> {
    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
}
<span class="hljs-selector-id">#d1</span> {
    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
}
<span class="hljs-selector-id">#d2</span> {
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
}
<span class="hljs-selector-id">#d3</span> {
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
}</code></pre></td>
      </tr></tbody></table>
      </div><p>js 部分，我们设置 4 个块随机大小，并且随机上下左右距离，需要注意的是，这个距离是有一定的范围的</p>
<div class="hljs js">
      <span class="mark">javascript</span>
      <table><tbody><tr>
      <td class="line"><pre><code><span>1</span><br /><span>2</span><br /><span>3</span><br /><span>4</span><br /><span>5</span><br /><span>6</span><br /><span>7</span><br /><span>8</span><br /><span>9</span><br /><span>10</span><br /><span>11</span><br /><span>12</span><br /><span>13</span><br /><span>14</span><br /><span>15</span><br /><span>16</span><br /><span>17</span><br /><span>18</span><br /><span>19</span><br /><span>20</span><br /><span>21</span><br /><span>22</span><br /><span>23</span><br /><span>24</span><br /><span>25</span><br /><span>26</span><br /><span>27</span><br /><span>28</span><br /><span>29</span><br /><span>30</span><br /><span>31</span><br /><span>32</span><br /><span>33</span><br /><span>34</span><br /><span>35</span><br /><span>36</span><br /><span>37</span><br /><span>38</span><br /><span>39</span><br /><span>40</span><br /><span>41</span><br /><span>42</span><br /><span>43</span><br /><span>44</span><br /><span>45</span><br /></code></pre></td>
      <td class="code"><pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rd</span>(<span class="hljs-params">n,m</span>)</span>{
    <span class="hljs-keyword">var</span> c = m-n+<span class="hljs-number">1</span>;  
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * c + n);
}

<span class="hljs-keyword">var</span> w = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'section'</span>).width()),
    h = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'section'</span>).height());

$(<span class="hljs-string">'div'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> wh = rd(<span class="hljs-number">150</span>, <span class="hljs-number">200</span>)
    $(<span class="hljs-keyword">this</span>).css({
        <span class="hljs-attr">width</span>: wh,
        <span class="hljs-attr">height</span>: wh
    })
})

<span class="hljs-keyword">var</span> d0 = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'#d0'</span>).width()),
    d1 = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'#d1'</span>).width()),
    d2 = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'#d2'</span>).width()),
    d3 = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'#d3'</span>).width());

<span class="hljs-keyword">var</span> a1 = rd(-(d0 / <span class="hljs-number">4</span>), w / <span class="hljs-number">2</span> - d0),
    a2 = rd(<span class="hljs-number">0</span>, h / <span class="hljs-number">2</span> - d0 / <span class="hljs-number">4</span> * <span class="hljs-number">3</span>);

<span class="hljs-keyword">var</span> b1 = rd(-(d1 / <span class="hljs-number">4</span>), w / <span class="hljs-number">2</span> - d1),
    b2 = rd(-(d1 / <span class="hljs-number">4</span>), h / <span class="hljs-number">2</span> - d1);

<span class="hljs-keyword">var</span> c1 = rd(<span class="hljs-number">0</span>, w / <span class="hljs-number">2</span> - d2 / <span class="hljs-number">4</span> * <span class="hljs-number">3</span>),
    c2 = rd(-(d2 / <span class="hljs-number">4</span>), h / <span class="hljs-number">2</span> - d2);    

<span class="hljs-keyword">var</span> e1 = rd(<span class="hljs-number">0</span>, w / <span class="hljs-number">2</span> - d3 / <span class="hljs-number">4</span> * <span class="hljs-number">3</span>),
    e2 = rd(<span class="hljs-number">0</span>, h / <span class="hljs-number">2</span> - d3 / <span class="hljs-number">4</span> * <span class="hljs-number">3</span>); 


$(<span class="hljs-string">'#d0'</span>).css(<span class="hljs-string">'margin-left'</span>, a1 +<span class="hljs-string">'px'</span>)
$(<span class="hljs-string">'#d0'</span>).css(<span class="hljs-string">'margin-top'</span>, a2 +<span class="hljs-string">'px'</span>)

$(<span class="hljs-string">'#d1'</span>).css(<span class="hljs-string">'margin-left'</span>, b1 +<span class="hljs-string">'px'</span>)
$(<span class="hljs-string">'#d1'</span>).css(<span class="hljs-string">'margin-top'</span>, b2 +<span class="hljs-string">'px'</span>)

$(<span class="hljs-string">'#d2'</span>).css(<span class="hljs-string">'margin-left'</span>, c1 +<span class="hljs-string">'px'</span>)
$(<span class="hljs-string">'#d2'</span>).css(<span class="hljs-string">'margin-top'</span>, c2 +<span class="hljs-string">'px'</span>)

$(<span class="hljs-string">'#d3'</span>).css(<span class="hljs-string">'margin-left'</span>, e1 +<span class="hljs-string">'px'</span>)
$(<span class="hljs-string">'#d3'</span>).css(<span class="hljs-string">'margin-top'</span>, e2 +<span class="hljs-string">'px'</span>)</code></pre></td>
      </tr></tbody></table>
      </div><h3 id="其他问题">其他问题</h3><p>这种定位简单方便，但是如果是单数块的时候，就要做一下相关处理了</p>

    </div>

    
    <div class="label">
    
    <div><a href="/tag/534950544/">#Blog</a></div>
    
    <div><a href="/tag/548067165/">#Grid</a></div>
    
    <div><a href="/tag/548066947/">#Javascript</a></div>
    
    </div>
    

    <div class="relate">
    
    
    <a rel="prev" href="/posts/126817142.html">← Mirror - 基于 issues 的博客工具</a>
    

    
    </div>

    
    
    <div id="disqus_thread"></div>
    
</div>


<div class="footer">
    <div class="center">
        &copy; 2017 AcyOrt . <a target="_blank" href="https://github.com/acyortjs/acyort">由 Github | AcyOrt 强力驱动</a> . <a target="_blank" href="/rss.xml">RSS</a> . <a target="_blank" href="https://github.com/LoeiFy/Recordum/issues">Source</a>
    </div>
</div>





<script>
var disqus_config = function() {
    this.page.url = location.href.split('?')[0]
    this.page.identifier = 71329290
}
;(function() {
var d = document, s = d.createElement('script');
s.src = '//acyort.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>



</body>
</html>
