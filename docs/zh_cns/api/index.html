<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<meta name="keywords" content="website,acyort,static" />
<meta name="description" content="A Node.js static website framework" />
<link rel="stylesheet" href="/css/style.css" />
<script>window.__language = "zh_cn"</script>

<title>
AcyOrt / API
</title>
</head>

<body>

<div class="header">
  <div class="center">
    <div class="menu">
      <a
        class="logo"
        
        href="/zh_cn/"
        
      >
        AcyOrt
      </a>

      <a class="github" target="_blank" href="https://github.com/acyortjs/acyort/"></a>

      
      <a
        class="normal"
        
        href="/zh_cn/docs/"
        
      >
        文档
      </a>
      
      <a
        class="normal"
        
        href="/zh_cn/api/"
        
      >
        API
      </a>
      
      <a
        class="normal"
        
        href="/zh_cn/miscellaneous/"
        
      >
        其他
      </a>
      
    </div>

    <div class="mobile-menu">
      
      <a
        
        href="/zh_cn/docs/"
        
      >
        文档
      </a>
      
      <a
        
        href="/zh_cn/api/"
        
      >
        API
      </a>
      
      <a
        
        href="/zh_cn/miscellaneous/"
        
      >
        其他
      </a>
      

      <ul><li><p>开始使用</p><a href="/zh_cn/docs/">概述</a><a href="/zh_cn/docs/setup/">创建</a><a href="/zh_cn/docs/configuration/">配置</a><a href="/zh_cn/docs/command/">命令</a></li><li><p>自定义</p><a href="/zh_cn/docs/template/">模板</a><a href="/zh_cn/docs/plugin/">插件</a><a href="/zh_cn/docs/helper/">辅助函数</a></li></ul>
      <ul><li><p>API</p><a href="/zh_cn/api/">概述</a><a href="/zh_cn/api/renderer/">渲染器</a><a href="/zh_cn/api/cli/">命令行</a><a href="/zh_cn/api/store/">数据存储</a><a href="/zh_cn/api/workflow/">流程</a><a href="/zh_cn/api/helper/">辅助函数</a><a href="/zh_cn/api/util/">工具类</a><a href="/zh_cn/api/hooks/">钩子</a></li></ul>
    </div>

    <div class="language">
      <select id="language">
        
        <option
          value="en"
          
        >
          English
        </option>
        
        <option
          value="zh_cn"
          
          selected
          
        >
          简体中文
        </option>
        
      </select>
      <div id="toggle"></div>
    </div>
  </div>
</div>



<div class="banner">
  <div class="center">API</div>
</div>

<div class="center main">
  <div class="nav">
    <div class="stay">
      
      <ul><li><p>API</p><a href="/zh_cn/api/">概述</a><a href="/zh_cn/api/renderer/">渲染器</a><a href="/zh_cn/api/cli/">命令行</a><a href="/zh_cn/api/store/">数据存储</a><a href="/zh_cn/api/workflow/">流程</a><a href="/zh_cn/api/helper/">辅助函数</a><a href="/zh_cn/api/util/">工具类</a><a href="/zh_cn/api/hooks/">钩子</a></li></ul>
      

      
    </div>
  </div>

  <div class="content markdown">
    <p>AcyOrt 默认作为一个全局命令行模块使用，即全局 CLI 方式使用</p><p>不过也支持作为一个 node 模块使用，以下是一个使用例子</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> acyort <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'acyort'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  base<span class="token punctuation">:</span> __dirname<span class="token punctuation">,</span> <span class="token comment">// 指定模版，输出基础目录</span>
  template<span class="token punctuation">:</span> <span class="token string">'ccc45'</span><span class="token punctuation">,</span> <span class="token comment">// 指定模板名字</span>
  language<span class="token punctuation">:</span> <span class="token string">'en'</span><span class="token punctuation">,</span> <span class="token comment">// 语言</span>
  root<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token comment">// 网站根目录</span>
  timezone<span class="token punctuation">:</span> <span class="token string">'UTC'</span><span class="token punctuation">,</span> <span class="token comment">// 时区</span>
  <span class="token keyword">public</span><span class="token punctuation">:</span> <span class="token string">'/'</span> <span class="token comment">// 文件输出根目录（相对于基础目录）</span>
  url<span class="token punctuation">:</span> <span class="token string">'https://acyort.com'</span><span class="token punctuation">,</span> <span class="token comment">// 网站 URL</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token function">acyort</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token comment">// 此时 ctx 就能访问到所以 AcyOrt 提供的方法</span></code></pre><blockquote>
<p>那么何时应该使用命令行方式，又何时可以作为一个 node 模块使用呢？</p><p>其实两种方式都差不多，如果你的应用已经存在，只是想借用 AcyOrt 的一些能力，那么可以 node 插件方式使用</p><p>其他的还是推荐使用全局命令行方式，填写一些配置，使用一些插件就可以生成网站</p></blockquote>
<p>AcyOrt 内置了许多 API 方法，以下为方法列表</p><ul>
<li>fs</li>
<li>version</li>
<li>logger</li>
<li>renderer</li>
<li>workflow</li>
<li>cli</li>
<li>store</li>
<li>config</li>
<li>helper</li>
<li>util</li>
</ul>
<h3>
  <a href="#文件操作" id="文件操作"></a>文件操作
</h3><p>文件操作使用的是 <a href="https://github.com/jprichardson/node-fs-extra">fs-extra</a></p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> fs <span class="token punctuation">}</span> <span class="token operator">=</span> acyort
<span class="token keyword">const</span> <span class="token punctuation">{</span> copySync<span class="token punctuation">,</span> removeSync <span class="token punctuation">}</span> <span class="token operator">=</span> fs</code></pre><h3>
  <a href="#程序版本" id="程序版本"></a>程序版本
</h3><p>获取当前 AcyOrt 版本信息</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> version <span class="token punctuation">}</span> <span class="token operator">=</span> acyort</code></pre><h3>
  <a href="#配置信息" id="配置信息"></a>配置信息
</h3><p>获取网站配置信息，即配置文件 <code>config.yml</code> 的内容</p><p>同时会获得当前运行的一些额外信息，基础路径，模板路径等</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> config <span class="token operator">=</span> acyort<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 全部配置信息</span>
<span class="token comment">/*
{
  url: 'https://acyort.com',
  template: 'ccc45',
  scripts: [ 'script.js' ],
  plugins: [],
  public: '/',
  timezone: 'Asia/Shanghai',
  language: 'en',
  root: '/',
  base: '/Users/am0200/Documents/github/acyort/assets'
}
*/</span>

<span class="token keyword">const</span> url <span class="token operator">=</span> acyort<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span> <span class="token comment">// 单个配置</span>

acyort<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'version'</span><span class="token punctuation">,</span> acyort<span class="token punctuation">.</span>version<span class="token punctuation">)</span> <span class="token comment">// 添加配置</span></code></pre><h3>
  <a href="#输出信息" id="输出信息"></a>输出信息
</h3><p>用于终端输出内容，使用的是 <a href="https://github.com/klaussinani/signale">signale</a></p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> logger <span class="token punctuation">}</span> <span class="token operator">=</span> acyort
logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span>

<span class="token comment">// 同时支持自定义 https://github.com/klaussinani/signale#custom-loggers</span>
<span class="token keyword">const</span> option <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> custom <span class="token operator">=</span> <span class="token function">logger</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span>

custom<span class="token punctuation">.</span><span class="token function">remind</span><span class="token punctuation">(</span><span class="token string">'Improve documentation.'</span><span class="token punctuation">)</span></code></pre><h3>
  <a href="#渲染器" id="渲染器"></a>渲染器
</h3><p>内置 <code>swig</code>, <code>markdown</code>, <code>yaml</code> 的渲染输出，支持自定义渲染器。具体查看 <a href="/api/renderer/">renderer</a> 说明</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> renderer <span class="token punctuation">}</span> <span class="token operator">=</span> acyort
renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'swig'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'swig'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
renderer<span class="token punctuation">.</span><span class="token function">renderFile</span><span class="token punctuation">(</span><span class="token string">'swig'</span><span class="token punctuation">,</span> <span class="token string">'html path'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'swig'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3>
  <a href="#注册命令" id="注册命令"></a>注册命令
</h3><p>通过这个方法，可以自定义一些 CLI 命令，详细查看 <a href="/api/cli/">cli</a> 说明</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> cli <span class="token punctuation">}</span> <span class="token operator">=</span> acyort</code></pre><h3>
  <a href="#数据共享" id="数据共享"></a>数据共享
</h3><p>用于插件间的数据传递，详细查看 <a href="/api/store/">store</a> 说明</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> store <span class="token punctuation">}</span> <span class="token operator">=</span> acyort</code></pre><h3>
  <a href="#流程" id="流程"></a>流程
</h3><p>该方法用于注册运行流程，可以自由控制整个构建过程，详细查看 <a href="/api/wordflow/">wordflow</a> 说明</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> workflow <span class="token punctuation">}</span> <span class="token operator">=</span> acyort</code></pre><h3>
  <a href="#模板渲染函数" id="模板渲染函数"></a>模板渲染函数
</h3><p>自定义一些函数用于模板使用，详细查看 <a href="/api/helper/">helper</a> 说明</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> helper <span class="token punctuation">}</span> <span class="token operator">=</span> acyort</code></pre><h3>
  <a href="#工具-辅助类" id="工具-辅助类"></a>工具/辅助类
</h3><p>提供一些工具/辅助类函数用于插件使用，详细查看 <a href="/api/util">util</a> 说明</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> util <span class="token punctuation">}</span> <span class="token operator">=</span> acyort</code></pre><h3>
  <a href="#钩子函数" id="钩子函数"></a>钩子函数
</h3><p>提供钩子函数 <code>hooks</code> 用于插件间的一些交互，详细查看 <a href="/api/hooks">hooks</a> 说明</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> hooks <span class="token punctuation">}</span> <span class="token operator">=</span> acyort</code></pre>

    
    <div class="paginator">
      <a class="disabled"></a><a name="paginator" class="next" href="/zh_cn/api/renderer/">下一页</a>
    </div>
    
  </div>

  <div class="toc">
    <div class="stay">
      
      <p>目录</p>
      <ul>
<li><a href="#文件操作">文件操作</a></li>
<li><a href="#程序版本">程序版本</a></li>
<li><a href="#配置信息">配置信息</a></li>
<li><a href="#输出信息">输出信息</a></li>
<li><a href="#渲染器">渲染器</a></li>
<li><a href="#注册命令">注册命令</a></li>
<li><a href="#数据共享">数据共享</a></li>
<li><a href="#流程">流程</a></li>
<li><a href="#模板渲染函数">模板渲染函数</a></li>
<li><a href="#工具-辅助类">工具/辅助类</a></li>
<li><a href="#钩子函数">钩子函数</a></li>
</ul>

      
    </div>
  </div>
</div>


<div class="footer">
  <div class="center">
    <div class="copy">
      &copy; 2019.
      <span>由 AcyOrt@3.4.0 构建</span>
    </div>
    <p>
      最后更新于: 2019年5月25日 21:56
    </p>
    <a href="#" class="top">返回顶部</a>
  </div>
</div>



<script src="/js/script.js"></script>


</body>
</html>
